@using MudBlazor
@inject NavigationManager NavigationManager
@inject ISolutionHandler SolutionHandler

<MudNavMenu>
    <MudNavLink Href="@NavigationManager.ToAbsoluteUri("").AbsoluteUri" Match="NavLinkMatch.All">
        <MudIcon Icon="@Icons.Material.Filled.Home" />
        &nbsp; Home
    </MudNavLink>

    @foreach (var year in _years.OrderByDescending(x => x))
    {
        <MudNavGroup Title="@year.ToString()" Expanded="true">
            @foreach (var (day, solutionMetadata) in _solutions[year])
            {
                var href = $"puzzle/{year}/{day}";
                <MudNavLink Href=@href>
                    Day @day - @solutionMetadata.Title
                </MudNavLink>
            }
        </MudNavGroup>
    }
</MudNavMenu>


@code {

    IEnumerable<int> _years;

    IDictionary<int, IDictionary<int, SolutionMetadata>> _solutions;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        _solutions = SolutionHandler.Solutions;
        _years = _solutions.Select(x => x.Key)
            .Distinct();
    }

}